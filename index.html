<html lang="en">
 <head>
  <meta charset="utf-8"/>
  <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
  <title>Penda</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" rel="stylesheet"/>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet"/>
  <style>
   .canvas-container {
     position: relative;
   }
   .canvas-container canvas {
     border: 3px solid #00e1ff;
     border-radius: 12px;
     background-color: white;
     box-shadow: 0 0 20px rgba(0, 225, 255, 0.4);
   }
   body {
     background: linear-gradient(135deg, #1f1c2c, #928dab);
     font-family: 'Roboto', sans-serif;
     color: #fff;
   }
   .tool-button {
     background-color: #2d2a40;
     color: #00e1ff;
     transition: all 0.2s ease-in-out;
     box-shadow: 0 0 8px #00e1ff88;
   }
   .tool-button:hover {
     background-color: #3d3a60;
     box-shadow: 0 0 12px #00e1ffcc;
   }
   input[type="color"], input[type="range"] {
     cursor: pointer;
     border: 2px solid #00e1ff;
     border-radius: 6px;
     box-shadow: 0 0 6px #00e1ff88;
   }
  </style>
 </head>
 <body class="bg-gray-900 font-roboto">
  <div class="container mx-auto p-4">
   <header class="flex justify-between items-center py-4">
    <h1 class="text-4xl font-bold text-[#00e1ff] drop-shadow-lg">Penda</h1>
   </header>

   <div class="flex justify-between items-center my-4">
    <!-- Ad Script - Leave untouched -->
    <script type="text/javascript">
      atOptions = {
        'key' : '583d0b05959afa95aa78b01bf5708a8b',
        'format' : 'iframe',
        'height' : 60,
        'width' : 468,
        'params' : {}
      };
    </script>
    <script type="text/javascript" src="//www.highperformanceformat.com/583d0b05959afa95aa78b01bf5708a8b/invoke.js"></script>

    <div class="flex-grow mx-4">
     <div class="bg-[#1e1a2b] shadow-xl rounded-lg p-4 border border-[#00e1ff50]">
      <div class="flex justify-between items-center mb-4">
       <div class="flex space-x-2">
        <button class="p-2 tool-button rounded" id="brush-tool"><i class="fas fa-paint-brush"></i></button>
        <button class="p-2 tool-button rounded" id="eraser-tool"><i class="fas fa-eraser"></i></button>
        <input class="p-2" id="color-picker" type="color"/>
        <input class="p-2" id="pen-size" max="50" min="1" type="range" value="5"/>
        <button class="p-2 tool-button rounded" id="undo-tool"><i class="fas fa-undo"></i></button>
        <button class="p-2 tool-button rounded" id="redo-tool"><i class="fas fa-redo"></i></button>
       </div>
       <div class="flex space-x-2">
        <button class="p-2 tool-button rounded" id="save-tool"><i class="fas fa-save"></i></button>
        <button class="p-2 tool-button rounded" id="clear-tool"><i class="fas fa-trash"></i></button>
       </div>
      </div>
      <div class="canvas-container">
       <canvas id="paint-canvas" width="800" height="400"></canvas>
      </div>
     </div>
    </div>

    <!-- Ad Script - Leave untouched -->
    <script type="text/javascript">
      atOptions = {
        'key' : '583d0b05959afa95aa78b01bf5708a8b',
        'format' : 'iframe',
        'height' : 60,
        'width' : 468,
        'params' : {}
      };
    </script>
    <script type="text/javascript" src="//www.highperformanceformat.com/583d0b05959afa95aa78b01bf5708a8b/invoke.js"></script>
   </div>
  </div>

  <script>
   const canvas = document.getElementById('paint-canvas');
   const ctx = canvas.getContext('2d');
   let painting = false;
   let penColor = '#000000';
   let penSize = 5;
   let history = [];
   let historyStep = -1;

   function startPosition(e) {
     painting = true;
     draw(e);
   }

   function endPosition() {
     painting = false;
     ctx.beginPath();
     if (historyStep < history.length - 1) {
       history = history.slice(0, historyStep + 1);
     }
     history.push(canvas.toDataURL());
     historyStep++;
   }

   function draw(e) {
     if (!painting) return;
     ctx.lineWidth = penSize;
     ctx.lineCap = 'round';
     ctx.strokeStyle = penColor;

     const rect = canvas.getBoundingClientRect();
     const x = (e.clientX || e.touches[0].clientX) - rect.left;
     const y = (e.clientY || e.touches[0].clientY) - rect.top;

     ctx.lineTo(x, y);
     ctx.stroke();
     ctx.beginPath();
     ctx.moveTo(x, y);
   }

   canvas.addEventListener('mousedown', startPosition);
   canvas.addEventListener('mouseup', endPosition);
   canvas.addEventListener('mousemove', draw);

   canvas.addEventListener('touchstart', startPosition);
   canvas.addEventListener('touchend', endPosition);
   canvas.addEventListener('touchmove', draw);

   document.getElementById('color-picker').addEventListener('change', (e) => {
     penColor = e.target.value;
   });

   document.getElementById('pen-size').addEventListener('change', (e) => {
     penSize = e.target.value;
   });

   document.getElementById('brush-tool').addEventListener('click', () => {
     penColor = document.getElementById('color-picker').value;
   });

   document.getElementById('eraser-tool').addEventListener('click', () => {
     penColor = '#FFFFFF';
   });

   document.getElementById('undo-tool').addEventListener('click', () => {
     if (historyStep > 0) {
       historyStep--;
       let canvasPic = new Image();
       canvasPic.src = history[historyStep];
       canvasPic.onload = () => {
         ctx.clearRect(0, 0, canvas.width, canvas.height);
         ctx.drawImage(canvasPic, 0, 0);
       };
     }
   });

   document.getElementById('redo-tool').addEventListener('click', () => {
     if (historyStep < history.length - 1) {
       historyStep++;
       let canvasPic = new Image();
       canvasPic.src = history[historyStep];
       canvasPic.onload = () => {
         ctx.clearRect(0, 0, canvas.width, canvas.height);
         ctx.drawImage(canvasPic, 0, 0);
       };
     }
   });

   document.getElementById('save-tool').addEventListener('click', () => {
     const link = document.createElement('a');
     link.download = 'painting.png';
     link.href = canvas.toDataURL();
     link.click();
   });

   document.getElementById('clear-tool').addEventListener('click', () => {
     ctx.clearRect(0, 0, canvas.width, canvas.height);
     history = [];
     historyStep = -1;
   });
  </script>
 </body>
</html>
